<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>yoribogo: 내 정보 수정</title>
    <link rel="icon" href="/images/post/yoribogo_favicon.ico" />
    <link rel="stylesheet" href="/css/mypage/myInfo.css" />
</head>
<body>
    <div class="wrap">
        <div class="innerWrapper">
            <nav class="innerWrapperNav" th:replace="~{/fix/mypage/myPageHeader :: mypage-nav}"></nav>
            <div class="overflow">
                <nav class="surfaceSecondary">
                    <div class="surfaceInner">
                        <div class="flexCol">
                            <div class="margin12">
                                <button class="profileImageBTN" type="button" style="width: 68px; height: 68px;">
                                    <span style="box-sizing: border-box; display: block; overflow: hidden; width: initial; height: initial; background: none; opacity: 1; border: 0px; margin: 0px; padding: 0px; position: absolute; inset: 0px;">
                                        <img th:src="@{${session.member.memberProfileName != null ? '/file/display?fileName=' + session.member.memberProfilePath  + '/t_' + session.member.memberProfileName : (session.member.memberKakaoProfileUrl != null ? session.member.memberKakaoProfileUrl : '/images/post/basicsImage.png')}}" alt="프로필 이미지" decoding="async" data-nimg="fill" class="rounded-full">
                                    </span>
                                    <span class="profileImageSpan"></span>
                                </button>
                            </div>
                            <h2 th:text="${session.member.memberName}" class="userName"></h2>
<!--                            <a href="/member/introMain">-->
                                <button type="button" class="myPageButton">
                                    <div class="myPageButtonInner">
                                        <div>내 페이지</div>
                                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" height="16px" width="16px" class="svg3">
                                            <path d="M11 7a1 1 0 0 0-1-1H4v14h14v-6a1 1 0 1 0-2 0v4H6V8h4a1 1 0 0 0 1-1Z"></path>
                                            <path d="M19.01 3.829H20v6.656a1 1 0 1 1-2 0V7.244l-5.293 5.293a1 1 0 0 1-1.414-1.415l5.293-5.292h-3.243a1 1 0 1 1 0-2H19.01Z"></path>
                                        </svg>
                                    </div>
                                </button>
<!--                            </a>-->
                        </div>
                    </div>
                    <ul class="surfaceUl">
                        <li class="surfaceUlLists">
                            <a class="aList" href="/mypage/myrecipe">
                                <img class="svg4" src="/images/myPage/2.png" />
                                <span class="surfaceCategory">내가 만든 레시피</span>
                            </a>
                        </li>
                        <li class="surfaceUlLists">
                            <a class="aList" href="/mypage/mypurchase">
                                <img class="svg5" src="/images/myPage/1.png" />
                                <span class="surfaceCategory">내가 구매한 레시피</span>
                            </a>
                        </li>
                        <li class="surfaceUlLists">
                            <a class="aList" href="/mypage/myfavorite">
                                <img class="svg5" src="/images/myPage/6.png" />
                                <span class="surfaceCategory">내가 찜한 레시피</span>
                            </a>
                        </li>
                        <li class="surfaceUlLists">
                            <a class="aList" href="/mypage/myreview">
                                <img class="svg5" src="/images/myPage/3.png" />
                                <span class="surfaceCategory">내가 작성한 후기</span>
                            </a>
                        </li>
                        <li class="surfaceUlLists">
                            <a class="aList" href="/mypage/othersreview">
                                <img class="svg5" src="/images/myPage/5.png" />
                                <span class="surfaceCategory">내가 받은 후기</span>
                            </a>
                        </li>
                        <li class="surfaceUlLists">
                            <a class="aList" href="/mypage/mycomment">
                                <img class="svg5" src="/images/myPage/4.png" />
                                <span class="surfaceCategory">내가 작성한 댓글</span>
                            </a>
                        </li>
                    </ul>
                </nav>
                <div class="basicShrink">
                    <div class="desktopGrid">
                        <div class="infoWrapper">
                            <div class="infoWrapperInner">
                                <h3 class="myinfoH3">내 페이지</h3>
                                <div class="flex">
                                    <div class="myInfoDiv">
                                        <button type="button" class="myInfoDivBtn">수정</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <form th:action="@{/mypage/myinfo}" name="information-form" method="post" style="display: contents" enctype="multipart/form-data">
                            <div class="infoDiv1">
                                <div>
                                    <div class="divInner1">
                                        <strong class="profilePhoto">프로필 사진</strong>
                                    </div>
                                    <span class="profileStatement">회원님을 대표하는 프로필 사진을 등록해주세요.</span>
                                </div>
                            </div>
                            <div class="infoDiv2">
                                <div class="flex">
                                    <div class="flex1">
                                        <span class="profileImg">
    <!--                                        <img th:src="${session.member.memberProfileName != null ? session.member.memberProfilePath + '/' + session.member.memberProfileName : (session.member.memberKakaoProfileUrl != null ? session.member.memberKakaoProfileUrl : '/images/post/basicsImage.png')}" alt="프로필이미지" class="myProfile"/>-->
                                            <img th:src="@{${session.member.memberProfileName != null ? '/file/display?fileName=' + session.member.memberProfilePath  + '/t_' + session.member.memberProfileName : (session.member.memberKakaoProfileUrl != null ? session.member.memberKakaoProfileUrl : '/images/post/basicsImage.png')}}" alt="프로필이미지" class="myProfile"/>
                                        </span>
                                    </div>
                                    <div class="flex2">
                                        <div class="flex2Margin">
                                            <button type="button" class="flex2Btn">
                                                이미지 업로드
                                                <input type="file" accept="image/png,image/jpeg,image/jpg" name="uploadFile" class="imageFile"/>
                                            </button>
                                        </div>
                                        <p class="flex2P">
                                            <span>파일 형식은 jpg 또는 png로,</span>
                                            <br/>
                                            <span>사이즈는 가로 200px, 세로 200px 이상으로 올려주세요.</span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <hr class="flex2Hr"/>
                            <div class="infoDiv3">
                                <div>
                                    <div class="info3Inner">
                                        <strong class="coverPhoto">커버사진</strong>
                                    </div>
                                    <span class="coverStatement">페이지의 커버 사진을 등록해주세요.</span>
                                </div>
                            </div>
                            <div class="infoDiv4">
                                <div class="info4Inner">
                                    <div class="dashedDiv">
                                        <img src="/images/myPage/backgroundNull.png" class="svgCover">
                                        <span class="backgroundSpan">
                                            <img alt="커버 이미지" th:src="@{${session.member.memberBackgroundName != null ? '/file/display?fileName=' + session.member.memberBackgroundPath + '/t_' + session.member.memberBackgroundName : null}}" decoding="async" data-nimg="fill" class="backgroundImg">
                                        </span>
                                    </div>
                                    <div class="margin8">
                                        <button type="button" class="margin8Btn">
                                            이미지업로드
                                            <input type="file" accept="image/png,image/jpeg,image/jpg" name="uploadFile" class="backgroundFile"/>
                                        </button>
                                    </div>
                                    <p class="margin8P">
                                        <span>파일 형식은 jpg 또는 png로,</span>
                                        <br/>
                                        <span>사이즈는 가로 800px, 세로 296px로 올려주세요.</span>
                                    </p>
                                </div>
                            </div>
                            <hr class="margin8Hr"/>
                            <div class="infoDiv5">
                                <div>
                                    <div class="info5Inner">
                                        <strong class="oneSentence">한 줄 소개</strong>
                                        <svg viewBox="0 0 8 8" xmlns="http://www.w3.org/2000/svg" class="svgOneSentence">
                                            <circle cx="4" cy="4" r="4"></circle>
                                        </svg>
                                    </div>
                                    <span class="info5Span">레시피 등 간략한 소개글을 입력해주세요.</span>
                                </div>
                            </div>
                            <div class="infoDiv6">
                                <div>
                                    <label class="info6Label">
                                        <input type="text" name="myInformation" class="labelText" placeholder="한 줄 소개를 입력해주세요." th:value="${session.member.memberOneLineIntro}" oninput="updateInputAndValidation(this)"/>
                                    </label>
                                    <div class="validationWrapOneSentence">
                                        <div class="validationWrapper">
                                            <div class="validationBox">
                                                <svg viewBox="0 0 25 25" xmlns="http://www.w3.org/2000/svg" class="svgValid">
                                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M12.008 22.05c5.523.023 10.019-4.436 10.042-9.959.023-5.523-4.436-10.018-9.959-10.041C6.568 2.027 2.073 6.485 2.05 12.008c-.023 5.523 4.435 10.019 9.958 10.042Zm1.527-6.494a1.5 1.5 0 1 1-3-.013 1.5 1.5 0 0 1 3 .013Zm-1.181-2.505a.5.5 0 0 0 .498-.436l.646-4.997a.5.5 0 0 0-.494-.564l-1.867-.008a.5.5 0 0 0-.499.56l.604 5.002a.5.5 0 0 0 .495.44l.617.003Z"></path>
                                                </svg>
                                                필수 항목입니다.
                                            </div>
                                        </div>
                                    </div>
                                    <div class="info6Div">
                                        <div class="textCount"></div>
                                    </div>
                                </div>
                            </div>
                            <hr class="margin8Hr"/>
                            <div class="infoDiv5">
                                <div>
                                    <div class="info5Inner">
                                        <strong class="oneSentence">크리에이터 소개</strong>
                                        <svg viewBox="0 0 8 8" xmlns="http://www.w3.org/2000/svg" class="svgOneSentence">
                                            <circle cx="4" cy="4" r="4"></circle>
                                        </svg>
                                    </div>
                                    <span style="display: inline-block; width: 320px;" class="info5Span">어떤 요리 활동을 하시는지 상세한 소개글을 입력해주세요. 매력적인 소개글을 작성하여 레시피 구매를 유도해보세요.</span>
                                </div>
                            </div>
                            <div class="infoDiv6">
                                <label style="height: 200px; position: relative" class="info6Label">
                                    <input style="position: absolute; top: 10px;" name="myInformation" type="text" class="labelText" placeholder="크리에이터를 소개해주세요." th:value="${session.member.memberIntroduction}"/>
                                </label>
                            </div>
                            <hr class="margin8Hr"/>
                            <div class="infoDiv5">
                                <div>
                                    <div class="info5Inner">
                                        <strong class="oneSentence">이용자 이름</strong>
                                        <svg viewBox="0 0 8 8" xmlns="http://www.w3.org/2000/svg" class="svgOneSentence">
                                            <circle cx="4" cy="4" r="4"></circle>
                                        </svg>
                                    </div>
                                    <span class="info5Span">크리에이터 페이지에 사용될 이름을 입력해주세요.</span>
                                </div>
                            </div>
                            <div class="infoDiv6">
                                <div>
                                    <label class="info6Label">
                                        <input type="text" name="myInformation" class="labelText" placeholder="사용될 이름을 입력해주세요." th:value="${session.member.memberName}" oninput="updateNameAndValidation(this)"/>
                                    </label>
                                    <div class="validationWrapOneSentence2">
                                        <div class="validationWrapper">
                                            <div class="validationBox">
                                                <svg viewBox="0 0 25 25" xmlns="http://www.w3.org/2000/svg" class="svgValid">
                                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M12.008 22.05c5.523.023 10.019-4.436 10.042-9.959.023-5.523-4.436-10.018-9.959-10.041C6.568 2.027 2.073 6.485 2.05 12.008c-.023 5.523 4.435 10.019 9.958 10.042Zm1.527-6.494a1.5 1.5 0 1 1-3-.013 1.5 1.5 0 0 1 3 .013Zm-1.181-2.505a.5.5 0 0 0 .498-.436l.646-4.997a.5.5 0 0 0-.494-.564l-1.867-.008a.5.5 0 0 0-.499.56l.604 5.002a.5.5 0 0 0 .495.44l.617.003Z"></path>
                                                </svg>
                                                필수 항목입니다.
                                            </div>
                                        </div>
                                    </div>
                                    <div class="info6Div">
                                        <div class="textCount"></div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="zIndex0"></div>
    </div>
</body>
<script th:inline="javascript">
    const memberBackgroundName = [[${session.member.memberBackgroundName}]];

    console.log(memberBackgroundName);

    if(memberBackgroundName == null){
        document.querySelector(".svgCover").style.display = "block";
    }else {
        document.querySelector(".backgroundSpan").style.display = "block";
    }
    const id=[[${session.member.id}]];
    const myPageButton =document.querySelector(".myPageButton");
    myPageButton.addEventListener("click",()=>{
        const idValue = id; // 전달할 ID 값

        const form = document.createElement('form');
        form.method = 'POST';
        form.action = '/member/introMain';

        const idInput = document.createElement('input');
        idInput.type = 'hidden';
        idInput.name = 'id'; // 이건 바꾸지말아주세요
        idInput.value = idValue; // ID 값
        form.appendChild(idInput);

        document.body.appendChild(form);
        form.submit();
        })
</script>
<script src="/js/mypage/myInfo.js"></script>
</html>